!function(o,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):o.bootbox=e(o.jQuery)}(this,function e(s,u){"use strict";var p={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close'>&times;</button>",form:"<form class='bootbox-form'></form>",group:"<div class='form-group'></div>",label:"<label class='col-sm-4 control-label'></label>",inputWrapper:"<div class='col-sm-8'></div>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control input-sm' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control input-sm'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control input-sm'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",password:"<input class='bootbox-input bootbox-input-password form-control input-sm' autocomplete='off' type='password' />"}},c={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0,container:"body"},d={};function i(o,e,t){o.preventDefault(),s.isFunction(t)&&!1===t(o)||e.modal("hide")}function b(o,t){var a=0;s.each(o,function(o,e){t(o,e,a++)})}function f(o,e,t){return s.extend(!0,{},o,function(o,e){var t=o.length,a={};if(t<1||2<t)throw new Error("Invalid argument length");return 2===t||"string"==typeof o[0]?(a[e[0]]=o[0],a[e[1]]=o[1]):a=o[0],a}(e,t))}function t(o,e,t,a){return v(f({className:"bootbox-"+o,buttons:m.apply(null,e)},a,t),e)}function m(){for(var o,e,t={},a=0,n=arguments.length;a<n;a++){var r=arguments[a],l=r.toLowerCase(),i=r.toUpperCase();t[l]={label:(o=i,void 0,e=h[c.locale],e?e[o]:h.en[o])}}return t}function v(o,e){var t={};return b(e,function(o,e){t[e]=!0}),b(o.buttons,function(o){if(t[o]===u)throw new Error("button key "+o+" is not allowed (options are "+e.join("\n")+")")}),o}d.alert=function(){var o;if((o=t("alert",["ok"],["message","callback"],arguments)).callback&&!s.isFunction(o.callback))throw new Error("alert requires callback property to be a function when provided");return o.buttons.ok.callback=o.onEscape=function(){return!s.isFunction(o.callback)||o.callback()},d.dialog(o)},d.confirm=function(){var o;if((o=t("confirm",["cancel","confirm"],["message","callback"],arguments)).buttons.cancel.callback=o.onEscape=function(){return o.callback(!1)},o.buttons.confirm.callback=function(){return o.callback(!0)},!s.isFunction(o.callback))throw new Error("confirm requires a callback");return d.dialog(o)},d.prompt=function(){var e,o,t,a,n,r,l;if(a=s(p.form),o={className:"bootbox-prompt",buttons:m("cancel","confirm"),value:"",inputType:"text"},r=(e=v(f(o,arguments,["title","callback"]),["cancel","confirm"])).show===u||e.show,e.message=a,e.buttons.cancel.callback=e.onEscape=function(){return e.callback(null)},e.buttons.confirm.callback=function(){var t;switch(e.inputType){case"text":case"textarea":case"email":case"select":case"password":t=n.val();break;case"checkbox":var o=n.find("input:checked");t=[],b(o,function(o,e){t.push(s(e).val())})}return e.callback(t)},e.show=!1,!e.title)throw new Error("prompt requires a title");if(!s.isFunction(e.callback))throw new Error("prompt requires a callback");if(!p.inputs[e.inputType])throw new Error("invalid prompt type");switch(n=s(p.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"password":n.val(e.value);break;case"select":var i={};if(!(l=e.inputOptions||[]).length)throw new Error("prompt with select requires options");b(l,function(o,e){var t=n;if(e.value===u||e.text===u)throw new Error("given options in wrong format");e.group&&(i[e.group]||(i[e.group]=s("<optgroup/>").attr("label",e.group)),t=i[e.group]),t.append("<option value='"+e.value+"'>"+e.text+"</option>")}),b(i,function(o,e){n.append(e)}),n.val(e.value);break;case"checkbox":var c=s.isArray(e.value)?e.value:[e.value];if(!(l=e.inputOptions||[]).length)throw new Error("prompt with checkbox requires options");if(!l[0].value||!l[0].text)throw new Error("given options in wrong format");n=s("<div/>"),b(l,function(o,t){var a=s(p.inputs[e.inputType]);a.find("input").attr("value",t.value),a.find("label").append(t.text),b(c,function(o,e){e===t.value&&a.find("input").prop("checked",!0)}),n.append(a)})}return e.placeholder&&n.attr("placeholder",e.placeholder),a.append(n),a.on("submit",function(o){o.preventDefault(),t.find(".btn-primary").click()}),(t=d.dialog(e)).off("shown.bs.modal"),t.on("shown.bs.modal",function(){n.focus()}),!0===r&&t.modal("show"),t},d.form=function(){var l,o,e,r,i,t;if(r=s(p.form),o={className:"bootbox-prompt",buttons:m("cancel","confirm"),fields:{}},t=(l=v(f(o,arguments,["title","callback"]),["cancel","confirm"])).show===u||l.show,(l.message=r).addClass("form-horizontal"),l.buttons.cancel.callback=l.onEscape=function(){return l.callback(null)},l.buttons.confirm.callback=function(){var a={};return b(l.fields,function(t,o){switch(o.type){case"text":case"textarea":case"email":case"select":case"password":a[t]=i[t].val();break;case"checkbox":if(l.fields[t].options){var e=i[t].find("input:checked");a[t]=[],b(e,function(o,e){a[t].push(s(e).val())})}else a[t]=i[t].find("input").is(":checked")}}),l.callback(a)},l.show=!1,!l.title)throw new Error("prompt requires a title");if(!s.isFunction(l.callback))throw new Error("prompt requires a callback");return i={},b(l.fields,function(n,e){if(!p.inputs[e.type])throw new Error("invalid prompt type: "+e.type);switch(i[n]=s(p.inputs[e.type]),e.type){case"text":case"textarea":e.value&&i[n].val(e.value);break;case"email":case"password":i[n].val(e.value);break;case"select":var a={},o=e.options||[];if(!o.length)throw new Error("select field requires options");b(o,function(o,e){var t=i[n];if(e.value===u||e.text===u)throw new Error("given options in wrong format");e.group&&(a[e.group]||(a[e.group]=s("<optgroup/>").attr("label",e.group)),t=a[e.group]),t.append("<option value='"+e.value+"'>"+e.text+"</option>")}),b(a,function(o,e){i[n].append(e)}),i[n].val(l.value);break;case"checkbox":var r=s.isArray(e.value)?e.value:[e.value];if(!(o=e.options||[{value:!0,text:" "}]).length)throw new Error("checkbox field requires options");if(!o[0].value||!o[0].text)throw new Error("checkbox options given in wrong format");i[n]=s("<div/>"),b(o,function(o,t){var a=s(p.inputs[e.type]);a.find("input").attr("value",t.value),a.find("label").append(t.text),b(r,function(o,e){e===t.value&&a.find("input").prop("checked",!0)}),i[n].append(a)})}e.placeholder&&i[n].attr("placeholder",l.placeholder),e.className&&i[n].addClass(e.className),e.readonly&&1==e.readonly&&i[n].attr("readonly","readonly")}),b(i,function(o,e){var t=s(p.group),a=s(p.label),n=s(p.inputWrapper);a.html(l.fields[o].label),n.append(e),t.append(a),t.append(n),r.append(t)}),r.on("submit",function(o){o.preventDefault(),e.find(".btn-primary").click()}),(e=d.dialog(l)).off("shown.bs.modal"),!0===t&&e.modal("show"),e},d.dialog=function(o){o=function(o){var a,n;if("object"!=typeof o)throw new Error("Please supply an object of options");if(!o.message)throw new Error("Please specify a message");return(o=s.extend({},c,o)).buttons||(o.buttons={}),o.backdrop=!!o.backdrop&&"static",a=o.buttons,n=function(o){var e,t=0;for(e in o)t++;return t}(a),b(a,function(o,e,t){if(s.isFunction(e)&&(e=a[o]={callback:e}),"object"!==s.type(e))throw new Error("button with key "+o+" must be an object");e.label||(e.label=o),e.className||(e.className=n<=2&&t===n-1?"btn-primary":"btn-default")}),o}(o);var t=s(p.dialog),e=t.find(".modal-body"),a=o.buttons,n="",r={onEscape:o.onEscape};if(b(a,function(o,e){n+="<button data-bb-handler='"+o+"' type='button' class='btn "+e.className+"'>"+e.label+"</button>",r[o]=e.callback}),e.find(".bootbox-body").html(o.message),!0===o.animate&&t.addClass("fade"),o.className&&t.addClass(o.className),o.title&&e.before(p.header),o.closeButton){var l=s(p.closeButton);o.title?t.find(".modal-header").append(l):l.css("margin-top","-10px").prependTo(e)}if(o.title&&t.find(".modal-title").html(o.title),o.size)switch(o.size){case"small":t.find(".modal-dialog").removeClass("modal-lg modal-md").addClass("modal-sm");break;default:t.find(".modal-dialog").removeClass("modal-lg modal-sm").addClass("modal-md")}return n.length&&(e.after(p.footer),t.find(".modal-footer").html(n)),t.on("hidden.bs.modal",function(o){o.target===this&&t.remove()}),t.on("shown.bs.modal",function(){t.find(".btn-primary:first").focus()}),t.on("escape.close.bb",function(o){r.onEscape&&i(o,t,r.onEscape)}),t.on("click",".modal-footer button",function(o){var e=s(this).data("bb-handler");i(o,t,r[e])}),t.on("click",".bootbox-close-button",function(o){i(o,t,r.onEscape)}),t.on("keyup",function(o){27===o.which&&t.trigger("escape.close.bb")}),s(o.container).append(t),t.modal({backdrop:o.backdrop,keyboard:!1,show:!1}),o.show&&t.modal("show"),t},d.setDefaults=function(){var o={};2===arguments.length?o[arguments[0]]=arguments[1]:o=arguments[0],s.extend(c,o)},d.hideAll=function(){s(".bootbox").modal("hide")};var h={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},id:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"}};return d.init=function(o){return e(o||s)},d});